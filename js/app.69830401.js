(function(e){function t(t){for(var i,r,s=t[0],c=t[1],d=t[2],u=0,l=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&l.push(a[r][0]),a[r]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);p&&p(t);while(l.length)l.shift()();return o.push.apply(o,d||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,r=1;r<n.length;r++){var s=n[r];0!==a[s]&&(i=!1)}i&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var i={},r={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-02a723bc":"1928e24e","chunk-07709945":"dfc63a76","chunk-2211ef9f":"1a8ddf0e","chunk-0e974d3b":"8c26bc1e","chunk-485430a2":"8ca5b3a0","chunk-59328b0f":"9c8cb300","chunk-43d21e96":"d28ce7f4","chunk-79b08059":"d420bb0b","chunk-ec53832a":"190734aa","chunk-1307805c":"7ef99ca1","chunk-2d0e546d":"fadf35eb","chunk-46038d86":"92c00191","chunk-dfe91464":"bde15289","chunk-199a0d11":"b2c4e22a","chunk-417bf35a":"59e781a3","chunk-460d880e":"c2846af8","chunk-d7b757f8":"007b1e60","chunk-dd1bd264":"0925456c","chunk-00a9bf6e":"7c3934d4","chunk-bc0b261a":"4948dc84","chunk-0431d032":"ddd042de","chunk-5eaaaddc":"86be8949"}[e]+".js"}function c(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-02a723bc":1,"chunk-07709945":1,"chunk-2211ef9f":1,"chunk-0e974d3b":1,"chunk-485430a2":1,"chunk-59328b0f":1,"chunk-43d21e96":1,"chunk-79b08059":1,"chunk-ec53832a":1,"chunk-46038d86":1,"chunk-dfe91464":1,"chunk-199a0d11":1,"chunk-460d880e":1,"chunk-d7b757f8":1,"chunk-dd1bd264":1,"chunk-00a9bf6e":1,"chunk-bc0b261a":1,"chunk-0431d032":1,"chunk-5eaaaddc":1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var i="css/"+({}[e]||e)+"."+{"chunk-02a723bc":"a6deb0e7","chunk-07709945":"7638bb48","chunk-2211ef9f":"b8090938","chunk-0e974d3b":"c14ec838","chunk-485430a2":"0536e069","chunk-59328b0f":"6183f5ab","chunk-43d21e96":"bb1378a9","chunk-79b08059":"aa35bca3","chunk-ec53832a":"8b68f14a","chunk-1307805c":"31d6cfe0","chunk-2d0e546d":"31d6cfe0","chunk-46038d86":"1763df84","chunk-dfe91464":"7c8b6a71","chunk-199a0d11":"18e71235","chunk-417bf35a":"31d6cfe0","chunk-460d880e":"dd84c133","chunk-d7b757f8":"85e964b6","chunk-dd1bd264":"85e964b6","chunk-00a9bf6e":"ff26364a","chunk-bc0b261a":"df354eba","chunk-0431d032":"32d88932","chunk-5eaaaddc":"9e9c52c8"}[e]+".css",a=c.p+i,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var d=o[s],u=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(u===i||u===a))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){d=l[s],u=d.getAttribute("data-href");if(u===i||u===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var i=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete r[e],p.parentNode.removeChild(p),n(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){r[e]=0})));var i=a[e];if(0!==i)if(i)t.push(i[2]);else{var o=new Promise((function(t,n){i=a[e]=[t,n]}));t.push(i[2]=o);var d,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var l=new Error;d=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+i+": "+r+")",l.name="ChunkLoadError",l.type=i,l.request=r,n[1](l)}a[e]=void 0}};var p=setTimeout((function(){d({type:"timeout",target:u})}),12e4);u.onerror=u.onload=d,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=i,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)c.d(n,i,function(t){return e[t]}.bind(null,i));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/dgtek-buildings-api/",c.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],u=d.push.bind(d);d.push=t,d=d.slice();for(var l=0;l<d.length;l++)t(d[l]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1a94":function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("96cf");var i=n("1da1");t["default"]=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,localStorage.setItemByName("selectedBuilding",n.building),e.abrupt("return",n.building);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2681:function(e,t,n){n("99af"),n("4de4"),n("4160"),n("c975"),n("a434"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0");var i=n("4082"),r=n("6374");Storage.prototype.getItemByName=function(e){return JSON.parse(this.getItem(e))},Storage.prototype.setItemByName=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getAllKeys=function(){var e,t=new Set,n=new Set,i=new Set,a=new Set,o=new Set,s=r(this.$buildingTypes);try{for(s.s();!(e=s.n()).done;){var c,d=e.value,u=this.getItemByName(d),l=r(u);try{for(l.s();!(c=l.n()).done;){var p=c.value,f=this.getItemByName(p);f.properties&&(t.add(f.properties.street),n.add(f.properties.city),i.add(f.properties.postCode),a.add(f.properties.state),o.add(f.properties.admin))}}catch(g){l.e(g)}finally{l.f()}}}catch(g){s.e(g)}finally{s.f()}return{streets:t,cities:n,postalCodes:i,states:a,admins:o}},Storage.prototype.findMarkersByAddress=function(e){var t,n=this,i=[],a=r(this.$buildingTypes);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=this.getItemByName(o);i=i.concat(s.filter((function(t){return n.getItemByName(t).address===e})))}}catch(c){a.e(c)}finally{a.f()}return i},Storage.prototype.findMarkersByProperty=function(e,t){var n,i=this,a=[],o=r(this.$buildingTypes);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=this.getItemByName(s);a=a.concat(c.filter((function(n){var r=i.getItemByName(n);return r.properties&&r.properties[e]===t})))}}catch(d){o.e(d)}finally{o.f()}return a},Storage.prototype.findMarkersByStreet=function(e){return this.findMarkersByProperty("street",e)},Storage.prototype.findMarkersByCity=function(e){return this.findMarkersByProperty("city",e)},Storage.prototype.findMarkersByState=function(e){return this.findMarkersByProperty("state",e)},Storage.prototype.findMarkersByAdminArea=function(e){return this.findMarkersByProperty("admin",e)},Storage.prototype.findMarkersByPostalCode=function(e){return this.findMarkersByProperty("postCode",e)},Storage.prototype.findMarker=function(e,t){var n,i=r(this.$buildingTypes);try{for(i.s();!(n=i.n()).done;){var a,o=n.value,s=this.getItemByName(o),c=r(s);try{for(c.s();!(a=c.n()).done;){var d=a.value,u=this.getItemByName(d);if(u.address===e)return Object.assign(u,{id:d});if(u.address.indexOf(e)>=0&&console.warn("Partial consilience found"),JSON.stringify(u.coordinates)===JSON.stringify(t))return this.setItemByName(d,{address:e,coordinates:t,status:u.status}),Object.assign(u,{id:d})}}catch(l){c.e(l)}finally{c.f()}}}catch(l){i.e(l)}finally{i.f()}return null},Storage.prototype.getMarkerCoordinates=function(e){return this.getItemByName(e).coordinates},Storage.prototype.setMarkerCoordinates=function(e,t){var n=this.getItemByName(e);n.coordinates=t,this.setItemByName(e,n)},Storage.prototype.setBuilingsListItem=function(e,t){this.setItemByName(e,{_id:e,address:t.address,addressComponents:t.addressComponents,buildingName:t.buildingName,coordinates:t.coordinates,distanceFromFootprint:t.distanceFromFootprint,status:t.status})},Storage.prototype.getMarkerType=function(e){return this.getItemByName(e).status},Storage.prototype.addNewBuilding=function(e,t){t.status=-1!==this.$buildingTypes.indexOf(t.status)?t.status:this.$buildingTypes.default,this.addBuildingToCollection(e,t.status),this.setItemByName("selectedBuilding",t),this.setBuilingsListItem(e,t),this.emit({eventType:"new-marker-added",markerId:e,status:t.status,coordinates:t.coordinates})},Storage.prototype.addBuildingToCollection=function(e,t){-1===this.$buildingTypes.indexOf(t)&&(console.warn("Building ".concat(e," has ivalid status")),t=this.$buildingTypes.default);var n,i=!1,a=r(this.$buildingTypes);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(i=-1!==this.getItemByName(o).indexOf(e),i)return void console.warn("Building ".concat(e," already exist"))}}catch(c){a.e(c)}finally{a.f()}var s=this.getItemByName(t);s.push(e),this.setItemByName(t,s)},Storage.prototype.removeBuildingFromCollection=function(e){var t,n=r(this.$buildingTypes);try{for(n.s();!(t=n.n()).done;){var i=t.value,a=this.getItemByName(i),o=a.indexOf(e);if(-1!==o){a.splice(o,1),this.setItemByName(i,a);break}}}catch(s){n.e(s)}finally{n.f()}},Storage.prototype.removeBuilding=function(e){this.removeBuildingFromCollection(e),this.removeItem(e)},Storage.prototype.updateMarkerType=function(e){var t=this.getItemByName("selectedBuilding");if(-1===this.$buildingTypes.indexOf(e))return!1;this.removeBuildingFromCollection(t._id),this.addBuildingToCollection(t._id,e),this.setItemByName(t._id,Object.assign(this.getItemByName(t._id),{status:e})),this.setItemByName("selectedBuilding",Object.assign(this.getItemByName("selectedBuilding"),{status:e})),this.emit({eventType:"marker-type-changed",markerId:t._id,status:e})},Storage.prototype.getAllBuildings=function(){var e,t=this,n=[],i=r(this.$buildingTypes);try{for(i.s();!(e=i.n()).done;){var a=e.value;this.getItemByName(a).forEach((function(e){n.push(t.getItemByName(e))}))}}catch(o){i.e(o)}finally{i.f()}return n},Storage.prototype.emit=function(e){var t=e.eventType,n=i(e,["eventType"]);this.eventHandler.dispatchEvent(Object.assign(new Event(t),{details:n}))}},"36ab":function(e,t,n){"use strict";n.r(t),t["default"]={design:"design",inspect:"laanInspect",install:"laanInstall",scope:"scope",approoval:"approoval"}},"56d7":function(e,t,n){"use strict";n.r(t);n("4160"),n("fb6a"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("a026"),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{absolute:"",color:"white"}},[n("v-toolbar-title",[n("h5",[e._v("Buildings API")])]),e.selectedBuildingId?n("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[n("v-spacer"),n("Button",{attrs:{clicked:e.generalDescription,icon:"generalDescription",color:"#777",text:"General Description"},on:{"update:clicked":function(t){e.generalDescription=t}}}),n("v-menu",{attrs:{bottom:"","close-on-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-btn",e._g({attrs:{color:"#777",icon:""}},i),[n("v-icon",[e._v("mdi-briefcase-variant")])],1)]}}],null,!1,2907819628)},[n("v-list",[n("v-list-item",{on:{click:function(t){e.management=!0}}},[n("v-list-item-title",[e._v(" Building Management ")])],1),n("v-list-item",{on:{click:function(t){e.owner=!0}}},[n("v-list-item-title",[e._v(" Building Owner ")])],1)],1)],1),n("Button",{attrs:{clicked:e.levels,icon:"buildingLevels",color:"#777",text:"Building Levels"},on:{"update:clicked":function(t){e.levels=t}}}),n("Button",{attrs:{clicked:e.infrastructure,icon:"infrastructure",color:"#777",text:"Infrastructure"},on:{"update:clicked":function(t){e.infrastructure=t}}}),n("Button",{attrs:{clicked:e.save,icon:"save",color:"#09b",text:"Save current building data"},on:{"update:clicked":function(t){e.save=t}}}),n("Button",{attrs:{clicked:e.confirmDeleteVisibility,icon:"delete",color:"#900",text:"Remove current building forever"},on:{"update:clicked":function(t){e.confirmDeleteVisibility=t}}})],1):e._e()],1),n("v-main",{staticClass:"mt-12",attrs:{id:"dgtek-markers"}},[n("Buildings",{directives:[{name:"show",rawName:"v-show",value:"home"===e.value,expression:"value === 'home'"}],attrs:{buildingId:e.selectedBuildingId},on:{"update:buildingId":function(t){e.selectedBuildingId=t},"update:building-id":function(t){e.selectedBuildingId=t}}}),"list"===e.value?n("ListOfBuildings",{attrs:{selectedBuildingId:e.selectedBuildingId},on:{"update:selectedBuildingId":function(t){e.selectedBuildingId=t},"update:selected-building-id":function(t){e.selectedBuildingId=t}}}):e._e(),n("WrapperDialog",{attrs:{opened:e.dialog,currentComponentName:e.componentName,buildingId:e.selectedBuildingId},on:{"update:opened":function(t){e.dialog=t}}}),e.diagnostics&&!e.diagnosticsDone?n("Diagnostics",{attrs:{types:e.$buildingTypes,finished:e.diagnosticsDone,opened:e.diagnostics},on:{"update:finished":function(t){e.diagnosticsDone=t},"update:opened":function(t){e.diagnostics=t}}}):e._e()],1),n("v-bottom-navigation",{attrs:{fixed:"",color:"#079"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("v-btn",{attrs:{value:"home"}},[n("span",[e._v("Home")]),n("v-icon",[e._v("$map")])],1),n("v-btn",{attrs:{value:"list"}},[n("span",[e._v("List of buildings")]),n("v-icon",[e._v("$list")])],1),n("v-btn",{attrs:{value:"diagnostics"}},[n("span",[e._v("Addresses diagnostics")]),n("v-icon",[e._v("$diagnostics")])],1)],1),n("ConfirmDelete",{attrs:{visibility:e.confirmDeleteVisibility,response:e.removingConfirmed},on:{"update:visibility":function(t){e.confirmDeleteVisibility=t},"update:response":function(t){e.removingConfirmed=t}}})],1)},a=[],o=(n("d3b7"),{name:"App",components:{Button:function(){return n.e("chunk-79b08059").then(n.bind(null,"2a7d"))},Buildings:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-2211ef9f"),n.e("chunk-0e974d3b")]).then(n.bind(null,"c849"))},ListOfBuildings:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-2211ef9f"),n.e("chunk-485430a2"),n.e("chunk-59328b0f")]).then(n.bind(null,"0396"))},ConfirmDelete:function(){return n.e("chunk-ec53832a").then(n.bind(null,"53d3"))},Diagnostics:function(){return n.e("chunk-02a723bc").then(n.bind(null,"4971"))},WrapperDialog:function(){return n.e("chunk-43d21e96").then(n.bind(null,"7f1a"))}},data:function(){return{ready:!1,save:!1,address:"",selectedBuilding:!1,selectedBuildingId:null,value:"home",buildingLevels:null,confirmDeleteVisibility:!1,removingConfirmed:!1,levels:!1,diagnosticsDone:!1,dialog:!1,generalDescription:!1,infrastructure:!1,management:!1,owner:!1,componentName:""}},computed:{diagnostics:{get:function(){return"diagnostics"===this.value},set:function(e){this.value=e?"diagnostics":"home"}}},watch:{selectedBuildingId:function(e){console.log("App: selectedBuildingId changed: ",e)},value:function(e){"list"===e&&this.$root.$map.resetSelectedMarker()},generalDescription:function(e){e&&(this.componentName="GeneralDescription",this.dialog=!0,this.generalDescription=!1)},infrastructure:function(e){e&&(this.componentName="Infrastructure",this.dialog=!0,this.infrastructure=!1)},management:function(e){e&&(this.componentName="BuildingManagement",this.dialog=!0,this.management=!1)},owner:function(e){e&&(this.componentName="BuildingOwner",this.dialog=!0,this.owner=!1)},levels:function(e){e&&(this.componentName="BuildingLevels",this.dialog=!0,this.levels=!1)},save:function(e){e&&(this._saveBuilding(),this.save=!1)},removingConfirmed:function(e){e&&(this._deleteBuilding(),this.$root.$map.removeMarker(),this.$emit("reset-selected-marker"),this.removingConfirmed=!1)}},beforeMount:function(){var e=this;this._getBuildingsList().then((function(){e.ready=!0,window.dispatchEvent(new Event("data-ready"))}))}}),s=o,c=n("2877"),d=n("6544"),u=n.n(d),l=n("7496"),p=n("40dc"),f=n("b81c"),g=n("8336"),m=n("132d"),h=n("8860"),b=n("da13"),y=n("5d23"),v=n("f6c4"),k=n("e449"),B=n("2fa4"),w=n("71d9"),O=n("2a7f"),I=Object(c["a"])(s,r,a,!1,null,null,null),N=I.exports;u()(I,{VApp:l["a"],VAppBar:p["a"],VBottomNavigation:f["a"],VBtn:g["a"],VIcon:m["a"],VList:h["a"],VListItem:b["a"],VListItemTitle:y["b"],VMain:v["a"],VMenu:k["a"],VSpacer:B["a"],VToolbar:w["a"],VToolbarTitle:O["b"]});var S=n("f309");i["a"].use(S["a"]);var x=new S["a"]({icons:{iconfont:"mdi",values:{map:"mdi-map",marker:"mdi-map-marker",list:"mdi-view-list",diagnostics:"mdi-marker-check",generalDescription:"mdi-file-table",buildingLevels:"mdi-home-city-outline",infrastructure:"mdi-pencil-ruler",edit:"mdi-pencil",save:"mdi-content-save",delete:"mdi-trash-can",dropdown:"mdi-menu-down",case:"mdi-briefcase-variant",face:"mdi-account-circle",rightArrow:"mdi-arrow-right-bold",instruments:"mdi-hammer-screwdriver",empty:"mdi-checkbox-blank-outline",block:"mdi-checkbox-blank",pdf:"mdi-file-pdf"}}});n("2681");i["a"].config.productionTip=!1;var T=n("bb70").default,_=T.types,j=T.colors,A=T.icons,C=T.defaultType;[i["a"],Storage].forEach((function(e){return Object.assign(e.prototype,{$buildingTypes:Object.assign([],_,{default:C}),$typeColors:Object.assign([],j),$typeIcons:Object.assign([],A)})})),i["a"].prototype.availableBuildingTypes={dwelling:["single dwelling unit","multi dwelling unit with raiser","multi dwelling unit without raiser"],type:["business park","duplex","standalone","warehouse","shopping mall"],category:["residential","commercial","mixed"],field:["brownfield","greenfield"]},i["a"].prototype._validateAddress=n("98bd").default,i["a"].prototype._getBuildingsList=n("74bc").default,i["a"].prototype._getBuildingDetails=n("1a94").default,i["a"].prototype._createNewBuilding=n("b651").default,i["a"].prototype._saveBuilding=n("f83e").default,i["a"].prototype._deleteBuilding=n("ddb7").default,i["a"].prototype._uploadBuildingPDF=n("9286").default,i["a"].prototype.$role=location.pathname.slice(1),new i["a"]({vuetify:x,render:function(e){return e(N)}}).$mount("#app")},"74bc":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("4160"),n("c975"),n("d3b7"),n("159b"),n("96cf");var i=n("1da1");t["default"]=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.clear(),localStorage.$buildingTypes.forEach((function(e){return localStorage.setItemByName(e,[])})),e.next=4,fetch("https://dgtek.herokuapp.com/building",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 4:return e.next=6,e.sent.json();case 6:if(t=e.sent,t.description){e.next=10;break}return console.warn("ERROR readin DB"),e.abrupt("return");case 10:t.description.forEach((function(e,t){var n=-1!==localStorage.$buildingTypes.indexOf(e.status)?e.status:localStorage.$buildingTypes.default;localStorage.setItemByName(e._id,e),localStorage.addBuildingToCollection(e._id,n)})),localStorage.setItemByName("selectedBuilding",null);case 12:case"end":return e.stop()}}),e)})))},9286:function(e,t,n){"use strict";n.r(t);n("99af"),n("c975"),n("b0c0"),n("b64b"),n("d3b7"),n("96cf");var i=n("1da1");t["default"]=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,i){var r,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n("36ab").default,-1!==Object.keys(r).indexOf(i)){e.next=3;break}throw new Error("Invalid route");case 3:if("application/pdf"===t.type){e.next=5;break}throw new Error("Invalid file type");case 5:return a=new FormData,a.append("file",t),console.log(i),console.log(a.get("file")),o=localStorage.getItemByName("selectedBuilding"),e.next=12,fetch("".concat("https://dgtek.herokuapp.com/building","/upload/").concat(i,"/").concat(o._id),{method:"POST",headers:{Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"},body:a});case 12:return e.next=14,e.sent.json();case 14:if(s=e.sent,console.log("UPLOAD BUILDING SITE SERVEY FILE:\n",s),!s.error){e.next=18;break}throw new Error("Error uploading file: ".concat(t.name,"\n").concat(s.error));case 18:return e.abrupt("return",s.data);case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},"98bd":function(e,t,n){"use strict";n.r(t);n("7db0"),n("d81d"),n("d3b7");var i=n("3835");t["default"]=function(e){if(window.google.maps){var t=(new window.google.maps.Geocoder).geocode;return new Promise((function(n,r){t({address:e},(function(e,t){if(this.ready="OK"===t,"OK"===t){var a=e[0].geometry.location,o=["street_number","route","locality","administrative_area_level_1","administrative_area_level_2","postal_code"].map((function(t){return e[0].address_components.find((function(e){return e.types[0]===t}))})).map((function(e){return e?e.short_name:""})),s=Object(i["a"])(o,6),c=s[0],d=s[1],u=s[2],l=s[3],p=s[4],f=s[5];n({formattedAddress:e[0].formatted_address,formattedCoordinates:[a.lng(),a.lat()],properties:{number:c,street:d,city:u,state:l,admin:p,postCode:f}})}else r(t)}))}))}console.warn("App is not ready to perform this action")}},b651:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("96cf");var i=n("1da1");t["default"]=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i,r,a,o,s,c,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dgtek.herokuapp.com/building",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"},body:JSON.stringify(t)});case 2:return e.next=4,e.sent.json();case 4:if(n=e.sent,!n.error){e.next=8;break}return console.warn(n.error),e.abrupt("return",null);case 8:return console.log("RESPONSE: ",n.data),localStorage.setItemByName("selectedBuilding",Object.assign(t,{_id:n.data})),i=t.address,r=t.addressComponents,a=t.buildingName,o=t.coordinates,s=t.distanceFromFootprint,c=t.status,d=t._id,localStorage.addNewBuilding(d,Object.assign({},{address:i,addressComponents:r,buildingName:a,coordinates:o,distanceFromFootprint:s,status:c,_id:d})),e.abrupt("return",n.data);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},bb70:function(e,t,n){"use strict";n.r(t),t["default"]={types:["LIT","Footprint","ComingSoon","Other"],colors:["#090","#09b","#fa0","#700"],icons:["mdi-home-map-marker","mdi-home-circle","mdi-home-circle-outline","mdi-home"],defaultType:"Other"}},ddb7:function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("96cf");var i=n("1da1");t["default"]=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=5;break}if(n=localStorage.getItemByName("selectedBuilding"),n||n._id){e.next=4;break}throw new Error("Invalid building");case 4:t=n._id;case 5:return e.next=7,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 7:return e.next=9,e.sent.json();case 9:if(i=e.sent,console.log("DELETE CURRENT BUILDING:\n",i),!i.error){e.next=14;break}throw console.warn(i),new Error("Removing building ".concat(t," failed"));case 14:return localStorage.removeBuilding(t),e.abrupt("return",i.data);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f83e:function(e,t,n){"use strict";n.r(t);n("99af"),n("d3b7"),n("96cf");var i=n("1da1");t["default"]=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=localStorage.getItemByName("selectedBuilding"),console.log(t),console.log(JSON.stringify(t)),e.next=5,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"},body:JSON.stringify(t)});case 5:return e.next=7,e.sent.json();case 7:if(n=e.sent,console.log("SAVE CURRENT BUILDING DATA:\n",n),!n.error){e.next=12;break}return console.warn(n.error),e.abrupt("return",null);case 12:return localStorage.setBuilingsListItem(t._id,t),e.abrupt("return",n.data);case 14:case"end":return e.stop()}}),e)})))}});
//# sourceMappingURL=app.69830401.js.map