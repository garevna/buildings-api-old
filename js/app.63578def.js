(function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,l=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&l.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);p&&p(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,i=1;i<n.length;i++){var s=n[i];0!==a[s]&&(r=!1)}r&&(o.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},a={app:0},o=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-02a723bc":"1928e24e","chunk-07709945":"dfc63a76","chunk-e663df34":"0af1c6ec","chunk-513ba47f":"e3778a70","chunk-5e13d15a":"5a9b8d70","chunk-8b02d28a":"ba9db911","chunk-085287fe":"1d78caaf","chunk-4353f169":"fd45c5e4","chunk-43d21e96":"0a87d9f4","chunk-79b08059":"d420bb0b","chunk-fba9858a":"9102cb2e","chunk-1307805c":"7ef99ca1","chunk-59fdea6a":"876e123f","chunk-84242278":"01107b26","chunk-dfe91464":"8ab5e248","chunk-2a7afbd8":"0a5c1d8b","chunk-460d880e":"16ffda60","chunk-478715c5":"99746b00","chunk-d7b757f8":"23ecd3fd","chunk-dd1bd264":"29b95247","chunk-417bf35a":"f8c5f681","chunk-0431d032":"ddd042de","chunk-39c73538":"754adca4","chunk-23eb495d":"479f2f11","chunk-71921c3d":"4f3f83a8","chunk-bc0b261a":"4948dc84"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-02a723bc":1,"chunk-07709945":1,"chunk-e663df34":1,"chunk-513ba47f":1,"chunk-5e13d15a":1,"chunk-8b02d28a":1,"chunk-085287fe":1,"chunk-4353f169":1,"chunk-43d21e96":1,"chunk-79b08059":1,"chunk-fba9858a":1,"chunk-84242278":1,"chunk-dfe91464":1,"chunk-2a7afbd8":1,"chunk-460d880e":1,"chunk-478715c5":1,"chunk-d7b757f8":1,"chunk-dd1bd264":1,"chunk-0431d032":1,"chunk-39c73538":1,"chunk-23eb495d":1,"chunk-bc0b261a":1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-02a723bc":"a6deb0e7","chunk-07709945":"7638bb48","chunk-e663df34":"b8090938","chunk-513ba47f":"c14ec838","chunk-5e13d15a":"3fc27d66","chunk-8b02d28a":"7238c912","chunk-085287fe":"9d702415","chunk-4353f169":"9d702415","chunk-43d21e96":"bb1378a9","chunk-79b08059":"aa35bca3","chunk-fba9858a":"9d702415","chunk-1307805c":"31d6cfe0","chunk-59fdea6a":"31d6cfe0","chunk-84242278":"2ff7c37e","chunk-dfe91464":"7c8b6a71","chunk-2a7afbd8":"8b065794","chunk-460d880e":"dd84c133","chunk-478715c5":"ff26364a","chunk-d7b757f8":"85e964b6","chunk-dd1bd264":"85e964b6","chunk-417bf35a":"31d6cfe0","chunk-0431d032":"32d88932","chunk-39c73538":"41b294e4","chunk-23eb495d":"85e964b6","chunk-71921c3d":"31d6cfe0","chunk-bc0b261a":"df354eba"}[e]+".css",a=c.p+r,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===r||d===a))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===r||d===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var r=t&&t.target&&t.target.src||a,o=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=r,delete i[e],p.parentNode.removeChild(p),n(o)},p.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(p)})).then((function(){i[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(p);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,n[1](l)}a[e]=void 0}};var p=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/dgtek-buildings-api/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var p=d;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),i=n.n(r);i.a},2681:function(e,t,n){n("99af"),n("4de4"),n("4160"),n("c975"),n("a434"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0");var r=n("4082"),i=n("6374");Storage.prototype.getItemByName=function(e){return JSON.parse(this.getItem(e))},Storage.prototype.setItemByName=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getAllKeys=function(){var e,t=new Set,n=new Set,r=new Set,a=new Set,o=new Set,s=i(this.$buildingTypes);try{for(s.s();!(e=s.n()).done;){var c,u=e.value,d=this.getItemByName(u),l=i(d);try{for(l.s();!(c=l.n()).done;){var p=c.value,f=this.getItemByName(p);f.properties&&(t.add(f.properties.street),n.add(f.properties.city),r.add(f.properties.postCode),a.add(f.properties.state),o.add(f.properties.admin))}}catch(g){l.e(g)}finally{l.f()}}}catch(g){s.e(g)}finally{s.f()}return{streets:t,cities:n,postalCodes:r,states:a,admins:o}},Storage.prototype.findMarkersByAddress=function(e){var t,n=this,r=[],a=i(this.$buildingTypes);try{for(a.s();!(t=a.n()).done;){var o=t.value,s=this.getItemByName(o);r=r.concat(s.filter((function(t){return n.getItemByName(t).address===e})))}}catch(c){a.e(c)}finally{a.f()}return r},Storage.prototype.findMarkersByProperty=function(e,t){var n,r=this,a=[],o=i(this.$buildingTypes);try{for(o.s();!(n=o.n()).done;){var s=n.value,c=this.getItemByName(s);a=a.concat(c.filter((function(n){var i=r.getItemByName(n);return i.properties&&i.properties[e]===t})))}}catch(u){o.e(u)}finally{o.f()}return a},Storage.prototype.findMarkersByStreet=function(e){return this.findMarkersByProperty("street",e)},Storage.prototype.findMarkersByCity=function(e){return this.findMarkersByProperty("city",e)},Storage.prototype.findMarkersByState=function(e){return this.findMarkersByProperty("state",e)},Storage.prototype.findMarkersByAdminArea=function(e){return this.findMarkersByProperty("admin",e)},Storage.prototype.findMarkersByPostalCode=function(e){return this.findMarkersByProperty("postCode",e)},Storage.prototype.findMarker=function(e,t){var n,r=i(this.$buildingTypes);try{for(r.s();!(n=r.n()).done;){var a,o=n.value,s=this.getItemByName(o),c=i(s);try{for(c.s();!(a=c.n()).done;){var u=a.value,d=this.getItemByName(u);if(d.address===e)return Object.assign(d,{id:u});if(d.address.indexOf(e)>=0&&console.warn("Partial consilience found"),JSON.stringify(d.coordinates)===JSON.stringify(t))return this.setItemByName(u,{address:e,coordinates:t,status:d.status}),Object.assign(d,{id:u})}}catch(l){c.e(l)}finally{c.f()}}}catch(l){r.e(l)}finally{r.f()}return null},Storage.prototype.getMarkerCoordinates=function(e){return this.getItemByName(e).coordinates},Storage.prototype.setMarkerCoordinates=function(e,t){var n=this.getItemByName(e);n.coordinates=t,this.setItemByName(e,n)},Storage.prototype.setBuilingsListItem=function(e,t){this.setItemByName(e,{_id:e,address:t.address,addressComponents:t.addressComponents,buildingName:t.buildingName,coordinates:t.coordinates,distanceFromFootprint:t.distanceFromFootprint,status:t.status})},Storage.prototype.getMarkerType=function(e){return this.getItemByName(e).status},Storage.prototype.addNewBuilding=function(e,t){t.status=-1!==this.$buildingTypes.indexOf(t.status)?t.status:this.$buildingTypes.default,this.addBuildingToCollection(e,t.status),this.setItemByName("selectedBuilding",t),this.setBuilingsListItem(e,t),this.emit({eventType:"new-marker-added",markerId:e,status:t.status,coordinates:t.coordinates})},Storage.prototype.addBuildingToCollection=function(e,t){-1===this.$buildingTypes.indexOf(t)&&(console.warn("Building ".concat(e," has ivalid status")),t=this.$buildingTypes.default);var n,r=!1,a=i(this.$buildingTypes);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(r=-1!==this.getItemByName(o).indexOf(e),r)return void console.warn("Building ".concat(e," already exist"))}}catch(c){a.e(c)}finally{a.f()}var s=this.getItemByName(t);s.push(e),this.setItemByName(t,s)},Storage.prototype.removeBuildingFromCollection=function(e){var t,n=i(this.$buildingTypes);try{for(n.s();!(t=n.n()).done;){var r=t.value,a=this.getItemByName(r),o=a.indexOf(e);if(-1!==o){a.splice(o,1),this.setItemByName(r,a);break}}}catch(s){n.e(s)}finally{n.f()}},Storage.prototype.removeBuilding=function(e){this.removeBuildingFromCollection(e),this.removeItem(e)},Storage.prototype.updateMarkerType=function(e){var t=this.getItemByName("selectedBuilding");if(-1===this.$buildingTypes.indexOf(e))return!1;this.removeBuildingFromCollection(t._id),this.addBuildingToCollection(t._id,e),this.setItemByName(t._id,Object.assign(this.getItemByName(t._id),{status:e})),this.setItemByName("selectedBuilding",Object.assign(this.getItemByName("selectedBuilding"),{status:e})),this.emit({eventType:"marker-type-changed",markerId:t._id,status:e})},Storage.prototype.getAllBuildings=function(){var e,t=this,n=[],r=i(this.$buildingTypes);try{for(r.s();!(e=r.n()).done;){var a=e.value;this.getItemByName(a).forEach((function(e){n.push(t.getItemByName(e))}))}}catch(o){r.e(o)}finally{r.f()}return n},Storage.prototype.emit=function(e){var t=e.eventType,n=r(e,["eventType"]);this.eventHandler.dispatchEvent(Object.assign(new Event(t),{details:n}))}},"56d7":function(e,t,n){"use strict";n.r(t);n("4160"),n("fb6a"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{absolute:"",color:"white"}},[n("v-toolbar-title",[n("h5",[e._v("Buildings API")])]),e.selectedBuildingId?n("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[n("v-spacer"),n("Button",{attrs:{clicked:e.generalDescription,icon:"generalDescription",color:"#777",text:"General Description"},on:{"update:clicked":function(t){e.generalDescription=t}}}),n("v-menu",{attrs:{bottom:"","close-on-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"#777",icon:""}},r),[n("v-icon",[e._v("$case")])],1)]}}],null,!1,4191596549)},[n("v-list",[n("v-list-item",{on:{click:function(t){e.management=!0}}},[n("v-list-item-title",[e._v(" Building Management ")])],1),n("v-list-item",{on:{click:function(t){e.owner=!0}}},[n("v-list-item-title",[e._v(" Building Owner ")])],1)],1)],1),n("v-menu",{attrs:{bottom:"","close-on-click":"","offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"#777",icon:""}},r),[n("v-icon",[e._v("$upload")])],1)]}}],null,!1,1522832018)},[n("v-list",[n("v-list-item",{on:{click:function(t){return e.startUpload("design")}}},[n("v-list-item-title",[e._v(" Design ")])],1),n("v-list-item",{on:{click:function(t){return e.startUpload("inspect")}}},[n("v-list-item-title",[e._v(" LAAN Inspect ")])],1),n("v-list-item",{on:{click:function(t){return e.startUpload("install")}}},[n("v-list-item-title",[e._v(" LAAN Install ")])],1),n("v-list-item",{on:{click:function(t){return e.startUpload("scope")}}},[n("v-list-item-title",[e._v(" Scope ")])],1),n("v-list-item",{on:{click:function(t){return e.startUpload("photos")}}},[n("v-list-item-title",[e._v(" Photos ")])],1)],1)],1),n("Button",{attrs:{clicked:e.levels,icon:"buildingLevels",color:"#777",text:"Building Levels"},on:{"update:clicked":function(t){e.levels=t}}}),n("Button",{attrs:{clicked:e.infrastructure,icon:"infrastructure",color:"#777",text:"Infrastructure"},on:{"update:clicked":function(t){e.infrastructure=t}}}),"list"!==e.value?n("Button",{attrs:{clicked:e.save,icon:"save",color:"#09b",text:"Save current building data"},on:{"update:clicked":function(t){e.save=t}}}):e._e(),"list"!==e.value?n("Button",{attrs:{clicked:e.confirmDeleteVisibility,icon:"delete",color:"#900",text:"Remove current building forever"},on:{"update:clicked":function(t){e.confirmDeleteVisibility=t}}}):e._e()],1):e._e()],1),n("v-main",{staticClass:"mt-12",attrs:{id:"dgtek-markers"}},[n("Buildings",{directives:[{name:"show",rawName:"v-show",value:"home"===e.value,expression:"value === 'home'"}],attrs:{buildingId:e.selectedBuildingId},on:{"update:buildingId":function(t){e.selectedBuildingId=t},"update:building-id":function(t){e.selectedBuildingId=t}}}),"list"===e.value?n("ListOfBuildings",{attrs:{selectedBuildingId:e.selectedBuildingId},on:{"update:selectedBuildingId":function(t){e.selectedBuildingId=t},"update:selected-building-id":function(t){e.selectedBuildingId=t}}}):e._e(),n("WrapperDialog",{attrs:{opened:e.dialog,currentComponentName:e.componentName,buildingId:e.selectedBuildingId,uploadParam:e.uploadParam},on:{"update:opened":function(t){e.dialog=t}}}),e.diagnostics&&!e.diagnosticsDone?n("Diagnostics",{attrs:{types:e.$buildingTypes,finished:e.diagnosticsDone,opened:e.diagnostics},on:{"update:finished":function(t){e.diagnosticsDone=t},"update:opened":function(t){e.diagnostics=t}}}):e._e()],1),n("v-bottom-navigation",{attrs:{fixed:"",color:"#079"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[n("v-btn",{attrs:{value:"home"}},[n("span",[e._v("Home")]),n("v-icon",[e._v("$map")])],1),n("v-btn",{attrs:{value:"list"}},[n("span",[e._v("List of buildings")]),n("v-icon",[e._v("$list")])],1),n("v-btn",{attrs:{value:"diagnostics"}},[n("span",[e._v("Addresses diagnostics")]),n("v-icon",[e._v("$diagnostics")])],1)],1),n("PopupDelete",{attrs:{opened:e.confirmDeleteVisibility,delete:e.removingConfirmed},on:{"update:opened":function(t){e.confirmDeleteVisibility=t},"update:delete":function(t){e.removingConfirmed=t}}}),n("ErrorMessage",{attrs:{opened:e.errorMessagePopupOpened,type:e.errorType,message:e.errorMessage},on:{"update:opened":function(t){e.errorMessagePopupOpened=t}}}),n("MessagePopup",{attrs:{opened:e.messagePopupOpened,type:e.messageType,message:e.message},on:{"update:opened":function(t){e.messagePopupOpened=t}}})],1)},a=[],o=(n("d3b7"),n("96cf"),n("1da1")),s={name:"App",components:{Button:function(){return n.e("chunk-79b08059").then(n.bind(null,"2a7d"))},Buildings:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-e663df34"),n.e("chunk-513ba47f")]).then(n.bind(null,"c849"))},ListOfBuildings:function(){return Promise.all([n.e("chunk-07709945"),n.e("chunk-e663df34"),n.e("chunk-5e13d15a"),n.e("chunk-8b02d28a")]).then(n.bind(null,"0396"))},Diagnostics:function(){return n.e("chunk-02a723bc").then(n.bind(null,"4971"))},WrapperDialog:function(){return n.e("chunk-43d21e96").then(n.bind(null,"7f1a"))},ErrorMessage:function(){return n.e("chunk-fba9858a").then(n.bind(null,"6860"))},MessagePopup:function(){return n.e("chunk-085287fe").then(n.bind(null,"f84d"))},PopupDelete:function(){return n.e("chunk-4353f169").then(n.bind(null,"eb5b"))}},data:function(){return{ready:!1,save:!1,address:"",selectedBuilding:!1,selectedBuildingId:null,value:"home",buildingLevels:null,confirmDeleteVisibility:!1,removingConfirmed:!1,levels:!1,diagnosticsDone:!1,dialog:!1,generalDescription:!1,infrastructure:!1,management:!1,owner:!1,uploadParam:null,componentName:"",errorMessagePopupOpened:!1,errorMessage:"",errorType:"",messageType:"success",message:"",messagePopupOpened:!1}},computed:{diagnostics:{get:function(){return"diagnostics"===this.value},set:function(e){this.value=e?"diagnostics":"home"}}},watch:{selectedBuildingId:function(e){var t=this;e?this._getBuildingDetails(e).then((function(e){e.error&&t.$root.$emit("error-event",{type:"Data error",message:"Reading current building' data failed"})})):localStorage.setItemByName("selectedBuilding",null)},value:function(e){"list"===e&&this.$root.$map.resetSelectedMarker()},generalDescription:function(e){e&&(this.componentName="GeneralDescription",this.dialog=!0,this.generalDescription=!1)},infrastructure:function(e){e&&(this.componentName="Infrastructure",this.dialog=!0,this.infrastructure=!1)},management:function(e){e&&(this.componentName="BuildingManagement",this.dialog=!0,this.management=!1)},owner:function(e){e&&(this.componentName="BuildingOwner",this.dialog=!0,this.owner=!1)},levels:function(e){e&&(this.componentName="BuildingLevels",this.dialog=!0,this.levels=!1)},save:function(e){e&&(this.saveBuldingData(),this.save=!1)},removingConfirmed:function(e){e&&(this._deleteBuilding(),this.$root.$map.removeMarker(),this.$emit("reset-selected-marker"),this.removingConfirmed=!1,this.$root.$emit("message-event",{type:"Delete",message:"Building removed"}))}},methods:{startUpload:function(e){this.uploadParam=e,this.componentName="FilesUpload",this.dialog=!0},saveBuldingData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e._saveBuilding();case 2:n=t.sent,n.error?e.$root.$emit("error-event",{type:"Data save error",message:"Error saving building' data"}):(localStorage.setBuilingsListItem(n.building._id,n.building),e.$root.$emit("message-event",{type:"Success",message:"Building' data saved"}));case 4:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this;this._getBuildingsList().then((function(){e.ready=!0,window.dispatchEvent(new Event("data-ready"))}))},mounted:function(){this.$root.$on("error-event",(function(e){Object.assign(this.$children[0],{errorMessage:e.message,errorType:e.type,errorMessagePopupOpened:!0})})),this.$root.$on("message-event",(function(e){Object.assign(this.$children[0],{message:e.message,type:e.type,messagePopupOpened:!0})}))}},c=s,u=(n("034f"),n("2877")),d=n("6544"),l=n.n(d),p=n("7496"),f=n("40dc"),g=n("b81c"),m=n("8336"),h=n("132d"),b=n("8860"),y=n("da13"),v=n("5d23"),k=n("f6c4"),B=n("e449"),w=n("2fa4"),O=n("71d9"),N=n("2a7f"),_=Object(u["a"])(c,i,a,!1,null,null,null),I=_.exports;l()(_,{VApp:p["a"],VAppBar:f["a"],VBottomNavigation:g["a"],VBtn:m["a"],VIcon:h["a"],VList:b["a"],VListItem:y["a"],VListItemTitle:v["b"],VMain:k["a"],VMenu:B["a"],VSpacer:w["a"],VToolbar:O["a"],VToolbarTitle:N["b"]});var S=n("f309");r["a"].use(S["a"]);var x=new S["a"]({icons:{iconfont:"mdi",values:{map:"mdi-map",marker:"mdi-map-marker",list:"mdi-view-list",diagnostics:"mdi-marker-check",generalDescription:"mdi-file-table",buildingLevels:"mdi-home-city-outline",infrastructure:"mdi-pencil-ruler",edit:"mdi-pencil",save:"mdi-content-save",delete:"mdi-trash-can",dropdown:"mdi-menu-down",case:"mdi-briefcase-variant",face:"mdi-account-circle",rightArrow:"mdi-arrow-right-bold",instruments:"mdi-hammer-screwdriver",empty:"mdi-checkbox-blank-outline",block:"mdi-checkbox-blank",pdf:"mdi-file-pdf",upload:"mdi-file-upload",error:"mdi-alert",message:"mdi-message-reply-text"}}}),j=(n("2681"),n("ce96").default),T=j._validateAddress,A=j._getBuildingsList,C=j._getBuildingDetails,P=j._createNewBuilding,D=j._saveBuilding,$=j._deleteBuilding,M=j._uploadBuildingFiles;Object.assign(r["a"].prototype,{_validateAddress:T,_getBuildingsList:A,_getBuildingDetails:C,_createNewBuilding:P,_saveBuilding:D,_deleteBuilding:$,_uploadBuildingFiles:M}),r["a"].config.productionTip=!1;var E=n("bb70").default,J=E.types,K=E.colors,L=E.icons,Q=E.defaultType;[r["a"],Storage].forEach((function(e){return Object.assign(e.prototype,{$buildingTypes:Object.assign([],J,{default:Q}),$typeColors:Object.assign([],K),$typeIcons:Object.assign([],L)})})),r["a"].prototype.availableBuildingTypes={dwelling:["single dwelling unit","multi dwelling unit with raiser","multi dwelling unit without raiser"],type:["business park","duplex","standalone","warehouse","shopping mall"],category:["residential","commercial","mixed"],field:["brownfield","greenfield"]},r["a"].prototype.$role=location.pathname.slice(1),new r["a"]({vuetify:x,render:function(e){return e(I)}}).$mount("#app")},"59cf":function(e,t,n){"use strict";n.r(t),t["default"]={design:{propName:"design",label:"Design",type:"pdf"},inspect:{propName:"laanInspect",label:"LAAN Inspect",type:"pdf"},install:{propName:"laanInstall",label:"LAAN Install",type:"pdf"},scope:{propName:"scope",label:"Scope",type:"pdf"},approoval:{propName:"approoval",label:"Approval",type:"pdf"},photos:{propName:"photos",label:"Photos",type:"image"}}},"85ec":function(e,t,n){},bb70:function(e,t,n){"use strict";n.r(t),t["default"]={types:["LIT","Footprint","ComingSoon","Other"],colors:["#090","#09b","#fa0","#700"],icons:["mdi-home-map-marker","mdi-home-circle","mdi-home-circle-outline","mdi-home"],defaultType:"Other"}},ce96:function(e,t,n){"use strict";n.r(t);n("99af"),n("7db0"),n("d81d"),n("d3b7");var r=n("3835"),i=function(e){if(!window.google.maps)return{error:"App is not ready to perform this action"};if(!e.streetNumber||!e.streetName||!e.locality||!e.state||!e.postCode)return{error:"Insufficient data to search address"};var t=(new window.google.maps.Geocoder).geocode,n={address:"".concat(e.streetNumber," ").concat(e.streetName,", ").concat(e.locality," ").concat(e.state," ").concat(e.postCode),componentRestrictions:{country:"AU",locality:e.locality,postalCode:e.postCode,route:e.streetName}};return new Promise((function(e){t(n,(function(t,n){if("OK"!==n)return e({error:n});var i=t[0].geometry.location,a=["street_number","route","locality","administrative_area_level_1","administrative_area_level_2","postal_code"].map((function(e){return t[0].address_components.find((function(t){return t.types[0]===e}))})).map((function(e){return e?e.short_name:""})),o=Object(r["a"])(a,6),s=o[0],c=o[1],u=o[2],d=o[3],l=o[4],p=o[5];e({formattedAddress:t[0].formatted_address,formattedCoordinates:[i.lng(),i.lat()],properties:{number:s,street:c,city:u,state:d,admin:l,postCode:p}})}))}))},a=(n("a4d3"),n("e01a"),n("4160"),n("c975"),n("159b"),n("96cf"),n("1da1")),o=Object(a["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.clear(),localStorage.$buildingTypes.forEach((function(e){return localStorage.setItemByName(e,[])})),e.next=4,fetch("https://dgtek.herokuapp.com/building",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 4:return e.next=6,e.sent.json();case 6:if(t=e.sent,t.description){e.next=10;break}return console.warn("ERROR readin DB"),e.abrupt("return");case 10:t.description.forEach((function(e,t){var n=-1!==localStorage.$buildingTypes.indexOf(e.status)?e.status:localStorage.$buildingTypes.default;localStorage.setItemByName(e._id,e),localStorage.addBuildingToCollection(e._id,n)})),localStorage.setItemByName("selectedBuilding",null);case 12:case"end":return e.stop()}}),e)}))),s=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 2:return e.next=4,e.sent.json();case 4:return n=e.sent,localStorage.setItemByName("selectedBuilding",n.building),e.abrupt("return",n.building);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r,i,a,o,s,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://dgtek.herokuapp.com/building",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"},body:JSON.stringify(t)});case 2:return e.next=4,e.sent.json();case 4:if(n=e.sent,!n.error){e.next=8;break}return console.warn(n.error),e.abrupt("return",n);case 8:return localStorage.setItemByName("selectedBuilding",Object.assign(t,{_id:n.data})),r=t.address,i=t.addressComponents,a=t.buildingName,o=t.coordinates,s=t.distanceFromFootprint,c=t.status,u=t._id,localStorage.addNewBuilding(u,Object.assign({},{address:r,addressComponents:i,buildingName:a,coordinates:o,distanceFromFootprint:s,status:c,_id:u})),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=localStorage.getItemByName("selectedBuilding"),e.next=3,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t._id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"},body:JSON.stringify(t)});case 3:return e.next=5,e.sent.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),d=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=5;break}if(n=localStorage.getItemByName("selectedBuilding"),n||n._id){e.next=4;break}return e.abrupt("return",{error:"Invalid building"});case 4:t=n._id;case 5:return e.next=7,fetch("".concat("https://dgtek.herokuapp.com/building","/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt"}});case 7:return e.next=9,e.sent.json();case 9:return r=e.sent,localStorage.removeBuilding(t),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=(n("b0c0"),n("b64b"),function(e){return new Promise((function(t,n){var r=Object.assign(new FileReader,{onload:function(e){return t(e.target.result)},onerror:function(){return n(new Error("Error reading the file ".concat(e.name)))}});r.readAsDataURL(e)}))}),p=function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t,r){var i,a,o,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=n("59cf").default,-1!==Object.keys(i).indexOf(r)){e.next=3;break}return e.abrupt("return",{error:"Invalid route"});case 3:if(-1!==t.type.indexOf(i[r].type)){e.next=5;break}return e.abrupt("return",{error:"Invalid file type"});case 5:return a={body:null,error:null},e.next=8,l(t).catch((function(e){a.error=e}));case 8:if(a.body=e.sent,!a.error){e.next=11;break}return e.abrupt("return",a);case 11:if(!a.statusCode||!a.message){e.next=13;break}return e.abrupt("return",Object.assign(a,{error:a.message}));case 13:return o=localStorage.getItemByName("selectedBuilding"),e.next=16,fetch("".concat("https://dgtek.herokuapp.com/building","/upload/").concat(r,"/").concat(o._id),{method:"POST",headers:{Authorization:"rAxKIAyY9j3Aq0OZ4TnGHCibU9G6oZZP8NaMOlKeJV9U2qjOKu0xOOQwjw3JzKaewN4DmzQ97aEsUh1XyAsQboJqQpbFpgK0JQkt","Content-Type":"application/json"},body:JSON.stringify({name:r,data:a.body})});case 16:return e.next=18,e.sent.json();case 18:return s=e.sent,e.abrupt("return",s);case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t["default"]={_validateAddress:i,_getBuildingsList:o,_getBuildingDetails:s,_createNewBuilding:c,_saveBuilding:u,_deleteBuilding:d,_uploadBuildingFiles:p}}});
//# sourceMappingURL=app.63578def.js.map